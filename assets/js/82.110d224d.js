(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{459:function(t,e,a){"use strict";a.r(e);var s=a(51),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ontop-with-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ontop-with-denodo"}},[t._v("#")]),t._v(" Ontop with Denodo")]),t._v(" "),a("p",[t._v("NB: You might also consult the following presentation, which shows screenshots for\nsome of the steps described below:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://github.com/ontop/ontop-examples/blob/master/cikm-2018-tutorial/4-obdi-demo.pdf",target:"_blank",rel:"noopener"}},[t._v("https://github.com/ontop/ontop-examples/blob/master/cikm-2018-tutorial/4-obdi-demo.pdf"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_1-set-up-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-set-up-denodo"}},[t._v("#")]),t._v(" 1. Set up Denodo.")]),t._v(" "),a("h4",{attrs:{id:"download-denodo-express"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#download-denodo-express"}},[t._v("#")]),t._v(" Download Denodo Express")]),t._v(" "),a("p",[t._v("Download it from "),a("a",{attrs:{href:"https://www.denodo.com/en/denodo-platform/denodo-express",target:"_blank",rel:"noopener"}},[t._v("https://www.denodo.com/en/denodo-platform/denodo-express"),a("OutboundLink")],1),a("br"),t._v("\n(register, download the platform and the licence file)")]),t._v(" "),a("p",[t._v("Unzip the file and run the installer.")]),t._v(" "),a("p",[t._v("Note: environment variable "),a("code",[t._v("JAVA_HOME")]),t._v(" must be set")]),t._v(" "),a("h4",{attrs:{id:"running-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#running-denodo"}},[t._v("#")]),t._v(" Running Denodo")]),t._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<DenodoInstallationPath>/bin/denodoPlatform.sh\n")])])]),a("ul",[a("li",[t._v("Select the 'Virtual DataPort' tab")]),t._v(" "),a("li",[t._v("Start 'Virtual DataPort Server'")]),t._v(" "),a("li",[t._v("Press the 'Launch' button")]),t._v(" "),a("li",[t._v("Login with:"),a("br"),t._v("\n. Login: "),a("code",[t._v("admin")]),a("br"),t._v("\n. Password: "),a("code",[t._v("admin")]),a("br"),t._v("\n. Server: "),a("code",[t._v("//localhost:9999/admin")])])]),t._v(" "),a("h3",{attrs:{id:"_2-configure-datasets-with-denodo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-configure-datasets-with-denodo"}},[t._v("#")]),t._v(" 2. Configure datasets with Denodo")]),t._v(" "),a("p",[t._v("NB: instead of doing the following step by step, you can also load "),a("a",{attrs:{href:"bzopendata.sql"}},[t._v("this SQL script")]),t._v(" directly within Denodo.")]),t._v(" "),a("h4",{attrs:{id:"create-a-database"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-database"}},[t._v("#")]),t._v(" Create a database")]),t._v(" "),a("p",[t._v("We will create two data sources based on web APIs."),a("br"),t._v("\nFirst, a Web API with weather data.")]),t._v(" "),a("ul",[a("li",[t._v("Administration -> Database Management -> New")]),t._v(" "),a("li",[t._v("Name the database "),a("code",[t._v("bzopendata")]),t._v(" for instance (leave the rest to default values), and click on the 'OK' button")]),t._v(" "),a("li",[t._v("In the left window, right-clik on the bzopendata database -> New -> Data Source -> JSON")]),t._v(" "),a("li",[t._v("In the field 'Name', enter "),a("code",[t._v("stations")])]),t._v(" "),a("li",[t._v("In the field 'Data route', select 'HTTP Client'")]),t._v(" "),a("li",[t._v("Click on the 'Configure' button to enter the URL of the source:"),a("br"),t._v(" "),a("a",{attrs:{href:"http://daten.buergernetz.bz.it/services/meteo/v1/stations",target:"_blank",rel:"noopener"}},[t._v("http://daten.buergernetz.bz.it/services/meteo/v1/stations"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Click on 'OK', and then press the 'Save' button to save the data source")])]),t._v(" "),a("p",[t._v("Then add a second data source for sensor data, repeating all the operations above, but:")]),t._v(" "),a("ul",[a("li",[t._v("in the field 'Name', enter "),a("code",[t._v("sensors")]),t._v(",")]),t._v(" "),a("li",[t._v("use the URL:\n"),a("a",{attrs:{href:"http://daten.buergernetz.bz.it/services/meteo/v1/sensors",target:"_blank",rel:"noopener"}},[t._v("http://daten.buergernetz.bz.it/services/meteo/v1/sensors"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"_3-configure-the-datasources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-configure-the-datasources"}},[t._v("#")]),t._v(" 3. Configure the datasources")]),t._v(" "),a("p",[t._v("Select a data source, and click on 'Create base view'")]),t._v(" "),a("ul",[a("li",[t._v('for stations: use the default "tuple root" ('),a("code",[t._v("/JSONFile")]),t._v(")")]),t._v(" "),a("li",[t._v('for sensors: use the "tuple root": '),a("code",[t._v("/JSONFile/JSONArray")]),t._v(" (uncheck the checkbox 'JSON root')")])]),t._v(" "),a("p",[t._v("Click on 'Save'.")]),t._v(" "),a("p",[t._v("For stations, click on the 'Execution panel' button, and then the button 'Execute'")]),t._v(" "),a("p",[t._v("We get only one result --\x3e We need to flatten the data:")]),t._v(" "),a("ul",[a("li",[t._v("In the left window, right-click on {}stations -> New -> Flatten\n(to display the data sources, you may need to right-click on 'bzopendata' -> 'Refresh')")]),t._v(" "),a("li",[t._v("Right click on the row 'features' in the table -> 'Flatten array features'")])]),t._v(" "),a("p",[t._v("In addition, we want to project the subfields of the JSON object 'properties':")]),t._v(" "),a("ul",[a("li",[t._v("Select the 'Output' tab")]),t._v(" "),a("li",[t._v("Right-click on the row 'properties' in the table -> 'Project subfields of properties'")])]),t._v(" "),a("p",[t._v("Click on 'Save': this creates a new view 'f_stations'")]),t._v(" "),a("h3",{attrs:{id:"_4-configure-ontop-protege-to-use-a-denodo-datasource"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-configure-ontop-protege-to-use-a-denodo-datasource"}},[t._v("#")]),t._v(" 4. Configure Ontop-protege to use a Denodo datasource")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Install the Denodo JDBC driver:\nWithin Protege: File -> Preferences -> 'JDBC Drivers' tab -> Add"),a("br"),t._v("\n. Description: "),a("code",[t._v("Denodo")]),a("br"),t._v("\n. Class name: "),a("code",[t._v("com.denodo.vdp.jdbc.Driver")]),a("br"),t._v("\n. Driver File (jar): browse to "),a("code",[t._v("<DenodoInstallationPath>/tools/client-drivers/jdbc/denodo-vdp-jdbcdriver.jar")])])]),t._v(" "),a("li",[a("p",[t._v("For the connection, in your Datasource manager, use:"),a("br"),t._v("\n. Connection url: "),a("code",[t._v("jdbc:vdb://localhost:9999/bzopendata")]),a("br"),t._v("\n. Database Username: "),a("code",[t._v("admin")]),a("br"),t._v("\n. Database Password: "),a("code",[t._v("admin")]),a("br"),t._v("\n. Driver class: "),a("code",[t._v("com.denodo.vdp.jdbc.Driver")])])])]),t._v(" "),a("h3",{attrs:{id:"_5-create-the-ontology-and-mapping-and-and-try-some-sparql-queries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-create-the-ontology-and-mapping-and-and-try-some-sparql-queries"}},[t._v("#")]),t._v(" 5. Create the ontology and mapping and and try some SPARQL queries")]),t._v(" "),a("p",[t._v("You can use directly the files we have prepared:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"bzweather.obda"}},[t._v("bzweather.obda")])]),t._v(" "),a("li",[a("a",{attrs:{href:"bzweather.owl"}},[t._v("bzweather.owl")])]),t._v(" "),a("li",[a("a",{attrs:{href:"bzweather.properties"}},[t._v("bzweather.properties")])]),t._v(" "),a("li",[a("a",{attrs:{href:"bzweather.q"}},[t._v("bzweather.q")])])]),t._v(" "),a("h3",{attrs:{id:"_6-setup-a-sparql-endpoint-with-command-line-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-setup-a-sparql-endpoint-with-command-line-interface"}},[t._v("#")]),t._v(" 6. Setup a SPARQL endpoint with Command Line Interface")]),t._v(" "),a("h4",{attrs:{id:"configure-ontop-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-ontop-cli"}},[t._v("#")]),t._v(" Configure Ontop CLI")]),t._v(" "),a("p",[t._v("Add the JDBC denodo driver for the Ontop CLI:")]),t._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cp <DenodoInstallationPath>/tools/client-drivers/jdbc/denodo-vdp-jdbcdriver.jar\n<OntopInstallationPath>/jdbc\n")])])]),a("p",[t._v("Run the Ontop CLI:")]),t._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ontop endpoint -t bzweather.owl -m bzweather.obda -p bzweather.properties --cors-allowed-origins='*'\n")])])]),a("h4",{attrs:{id:"access-the-sparql-endpoint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#access-the-sparql-endpoint"}},[t._v("#")]),t._v(" Access the SPARQL endpoint")]),t._v(" "),a("p",[t._v("Open "),a("a",{attrs:{href:"http://localhost:8080/",target:"_blank",rel:"noopener"}},[t._v("http://localhost:8080/"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Run an example SPARQL query:")]),t._v(" "),a("div",{staticClass:"language-sparql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sparql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PREFIX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("geo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("http://www.opengis.net/ont/geosparql#"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PREFIX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("http://www.w3.org/ns/sosa/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PREFIX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("http://example.org/weather#"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" *\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?station")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("WeatherStation")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("geo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("asWKT")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?wkt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("hasSensor")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?sensor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("longitude")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?lon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("latitude")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?lat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?sensor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("madeObservation")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("hasSimpleResult")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?wktLabel")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[a("span",{pre:!0,attrs:{class:"token prefix"}},[t._v("sosa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token local-name"}},[t._v("resultTime")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("?t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LIMIT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);