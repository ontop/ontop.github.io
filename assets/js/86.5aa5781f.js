(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{463:function(t,a,e){"use strict";e.r(a);var n=e(51),s=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"use-jupyter-notebook-with-an-ontop-sparql-endpoint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#use-jupyter-notebook-with-an-ontop-sparql-endpoint"}},[t._v("#")]),t._v(" Use Jupyter Notebook with an Ontop SPARQL endpoint")]),t._v(" "),e("p",[t._v("This tutorial shows how to use a Python/Jupyter Notebook to interact with an Ontop SPARQL endpoint.")]),t._v(" "),e("p",[t._v("Link to the Jupyter Notebook: "),e("a",{attrs:{href:"ontop-jupyter.ipynb"}},[t._v("ontop-jupyter.ipynb")])]),t._v(" "),e("p",[t._v("Assume that the endpoint is already set up and the URL is "),e("a",{attrs:{href:"http://localhost:8080/sparql",target:"_blank",rel:"noopener"}},[t._v("http://localhost:8080/sparql"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"sparqlwrapper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sparqlwrapper"}},[t._v("#")]),t._v(" SPARQLWrapper")]),t._v(" "),e("p",[t._v("You can use the "),e("a",{attrs:{href:"https://rdflib.github.io/sparqlwrapper/",target:"_blank",rel:"noopener"}},[t._v("SPARQLWrapper library"),e("OutboundLink")],1),t._v(" to send SPARQL queries and get results.\nThe following code gets the result as JSON documents and convert it to a Python dict object.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" SPARQLWrapper "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SPARQLWrapper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JSON\n\nq "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n  PREFIX : <http://example.org/voc#>\n  PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n  \n  SELECT ?lname ?title \n  WHERE {\n    ?attendee foaf:lastName ?lname ; :attends ?course .\n    ?course :title ?title .\n  }\n"""')]),t._v("\n\nsparql "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SPARQLWrapper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8080/sparql"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsparql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setQuery"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsparql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setReturnFormat"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JSON"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nresults "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sparql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("convert"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("results"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Running the code above yields the following output (JSON indentation added for clarity):")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n   "head":{\n      "vars":[ "lname", "title" ]\n   },\n   "results":{\n      "bindings":[ {\n         "lname":{ "type":"literal", "value":"Robards" },\n         "title":{ "type":"literal", "value":"Data Mining" }\n      }, {\n         "lname":{ "type":"literal", "value":"Smith" },\n         "title":{ "type":"literal", "value":"Operating Systems" }\n      }, {\n         "lname":{ "type":"literal", "value":"Doe" },\n         "title":{ "type":"literal", "value":"Linear Algebra" }\n      }, {\n         "lname":{ "type":"literal", "value":"Combs"  },\n         "title":{ "type":"literal", "value":"Operating Systems" }\n      }, {\n         "lname":{ "type":"literal", "value":"Doe" },\n         "title":{ "type":"literal", "value":"Analysis" }\n      }, {\n         "lname":{ "type":"literal", "value":"Hinkley" },\n         "title":{ "type":"literal", "value":"Data Mining" }\n      }, {\n         "lname":{ "type":"literal", "value":"Robards" },\n         "title":{ "type":"literal", "value":"Research Methods" }\n      }, {\n         "lname":{ "type":"literal", "value":"Smith" },\n         "title":{ "type":"literal", "value":"Analysis" }\n      }, {\n         "lname":{ "type":"literal", "value":"Smith" },\n         "title":{ "type":"literal", "value":"Linear Algebra" }\n      }, {\n         "lname":{ "type":"literal", "value":"Combs" },\n         "title":{ "type":"literal", "value":"Linear Algebra" }\n      }, {\n         "lname":{ "type":"literal", "value":"Hinkley" },\n         "title":{ "type":"literal", "value":"Theory of Computing" }\n      }, {\n         "lname":{ "type":"literal", "value":"Alfaro" },\n         "title":{ "type":"literal", "value":"Introduction to programming" }\n      }, {\n         "lname":{ "type":"literal", "value":"Hinkley" },\n         "title":{ "type":"literal", "value":"Software factory" }\n      }, {\n         "lname":{ "type":"literal", "value":"Mendez" },\n         "title":{ "type":"literal", "value":"Software factory" }\n      }, {\n         "lname":{ "type":"literal", "value":"Mendez" },\n         "title":{ "type":"literal", "value":"Software process management" }\n      }, {\n         "lname":{ "type":"literal", "value":"Moses" },\n         "title":{ "type":"literal", "value":"Information security" }\n      }, {\n         "lname":{ "type":"literal", "value":"Moses" },\n         "title":{ "type":"literal", "value":"Discrete mathematics and logic" }\n      } ]\n   }\n}\n')])])]),e("h2",{attrs:{id:"pandas-dataframe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pandas-dataframe"}},[t._v("#")]),t._v(" Pandas DataFrame")]),t._v(" "),e("p",[t._v("You might want to convert the SPARQL results to a pandas DataFrame for data analysis.\nThe library "),e("a",{attrs:{href:"https://github.com/lawlesst/sparql-dataframe",target:"_blank",rel:"noopener"}},[t._v("sparql-dataframe"),e("OutboundLink")],1),t._v(" is handy for this.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sparql_dataframe\n\nendpoint "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8080/sparql"')]),t._v("\n\nq "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n    PREFIX : <http://example.org/voc#>\n    PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n    \n    SELECT ?lname ?course_title \n    WHERE {\n    \n      ?attendee foaf:lastName ?lname ;\n          :attends ?course .\n      ?course :title ?course_title .\n    }\n"""')]),t._v("\n\ndf "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sparql_dataframe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("endpoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" q"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("The result "),e("code",[t._v("df")]),t._v(" can be manipulated as any Pandas DataFrame. For instance:")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("df"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",[e("style",{attrs:{scoped:""}},[t._v('\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\x3c!--beforebegin--\x3e<div class="language- extra-class">\x3c!--afterbegin--\x3e<pre><code>.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}\n</code></pre>\n\x3c!--beforeend--\x3e</div>\x3c!--afterend--\x3e')]),t._v(" "),e("table",{staticClass:"dataframe",attrs:{border:"1"}},[e("thead",[e("tr",{staticStyle:{"text-align":"right"}},[e("th"),t._v(" "),e("th",[t._v("lname")]),t._v(" "),e("th",[t._v("course_title")])])]),t._v(" "),e("tbody",[e("tr",[e("th",[t._v("0")]),t._v(" "),e("td",[t._v("Robards")]),t._v(" "),e("td",[t._v("Data Mining")])]),t._v(" "),e("tr",[e("th",[t._v("1")]),t._v(" "),e("td",[t._v("Smith")]),t._v(" "),e("td",[t._v("Operating Systems")])]),t._v(" "),e("tr",[e("th",[t._v("2")]),t._v(" "),e("td",[t._v("Doe")]),t._v(" "),e("td",[t._v("Linear Algebra")])]),t._v(" "),e("tr",[e("th",[t._v("3")]),t._v(" "),e("td",[t._v("Combs")]),t._v(" "),e("td",[t._v("Operating Systems")])]),t._v(" "),e("tr",[e("th",[t._v("4")]),t._v(" "),e("td",[t._v("Doe")]),t._v(" "),e("td",[t._v("Analysis")])])])])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("df"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("describe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",[e("style",{attrs:{scoped:""}},[t._v('\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\x3c!--beforebegin--\x3e<div class="language- extra-class">\x3c!--afterbegin--\x3e<pre><code>.dataframe tbody tr th {\n    vertical-align: top;\n}\n\n.dataframe thead th {\n    text-align: right;\n}\n</code></pre>\n\x3c!--beforeend--\x3e</div>\x3c!--afterend--\x3e')]),t._v(" "),e("table",{staticClass:"dataframe",attrs:{border:"1"}},[e("thead",[e("tr",{staticStyle:{"text-align":"right"}},[e("th"),t._v(" "),e("th",[t._v("lname")]),t._v(" "),e("th",[t._v("course_title")])])]),t._v(" "),e("tbody",[e("tr",[e("th",[t._v("count")]),t._v(" "),e("td",[t._v("17")]),t._v(" "),e("td",[t._v("17")])]),t._v(" "),e("tr",[e("th",[t._v("unique")]),t._v(" "),e("td",[t._v("8")]),t._v(" "),e("td",[t._v("11")])]),t._v(" "),e("tr",[e("th",[t._v("top")]),t._v(" "),e("td",[t._v("Smith")]),t._v(" "),e("td",[t._v("Linear Algebra")])]),t._v(" "),e("tr",[e("th",[t._v("freq")]),t._v(" "),e("td",[t._v("3")]),t._v(" "),e("td",[t._v("3")])])])])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("df"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'course_title'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value_counts"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kind"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("<matplotlib.axes._subplots.AxesSubplot at 0x11475ebd0>\n")])])]),e("img",{attrs:{src:"output_6_1.png",width:"446px"}})])}),[],!1,null,null,null);a.default=s.exports}}]);