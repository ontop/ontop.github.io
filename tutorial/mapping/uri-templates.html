<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Choice of the IRI templates | Ontop</title>
    <meta name="generator" content="VuePress 1.8.2">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.6c58b99e.css" as="style"><link rel="preload" href="/assets/js/app.86ad1eec.js" as="script"><link rel="preload" href="/assets/js/2.ce8d9015.js" as="script"><link rel="preload" href="/assets/js/100.f12c2aea.js" as="script"><link rel="prefetch" href="/assets/js/10.68331741.js"><link rel="prefetch" href="/assets/js/101.2dc21652.js"><link rel="prefetch" href="/assets/js/102.5bc6b79a.js"><link rel="prefetch" href="/assets/js/11.9c479812.js"><link rel="prefetch" href="/assets/js/12.ec942f13.js"><link rel="prefetch" href="/assets/js/13.82c8b4b6.js"><link rel="prefetch" href="/assets/js/14.cabf7cc1.js"><link rel="prefetch" href="/assets/js/15.7caa7cef.js"><link rel="prefetch" href="/assets/js/16.6ea3c048.js"><link rel="prefetch" href="/assets/js/17.23c168f3.js"><link rel="prefetch" href="/assets/js/18.1de16b6c.js"><link rel="prefetch" href="/assets/js/19.c55473af.js"><link rel="prefetch" href="/assets/js/20.8c67cb7d.js"><link rel="prefetch" href="/assets/js/21.86f0abbe.js"><link rel="prefetch" href="/assets/js/22.278cc1b2.js"><link rel="prefetch" href="/assets/js/23.bfb85965.js"><link rel="prefetch" href="/assets/js/24.0e2b8016.js"><link rel="prefetch" href="/assets/js/25.67984585.js"><link rel="prefetch" href="/assets/js/26.d98cd04f.js"><link rel="prefetch" href="/assets/js/27.67b0e53f.js"><link rel="prefetch" href="/assets/js/28.dde86d83.js"><link rel="prefetch" href="/assets/js/29.ea08de8a.js"><link rel="prefetch" href="/assets/js/3.0165f2f1.js"><link rel="prefetch" href="/assets/js/30.64b254ac.js"><link rel="prefetch" href="/assets/js/31.46aee505.js"><link rel="prefetch" href="/assets/js/32.1ce919ea.js"><link rel="prefetch" href="/assets/js/33.d779207d.js"><link rel="prefetch" href="/assets/js/34.1ba85fb8.js"><link rel="prefetch" href="/assets/js/35.8989099e.js"><link rel="prefetch" href="/assets/js/36.455e3965.js"><link rel="prefetch" href="/assets/js/37.4540ea42.js"><link rel="prefetch" href="/assets/js/38.7f8c8868.js"><link rel="prefetch" href="/assets/js/39.a8afde28.js"><link rel="prefetch" href="/assets/js/4.4c618c35.js"><link rel="prefetch" href="/assets/js/40.58c48c18.js"><link rel="prefetch" href="/assets/js/41.5d41cec2.js"><link rel="prefetch" href="/assets/js/42.503f8fa0.js"><link rel="prefetch" href="/assets/js/43.000fb608.js"><link rel="prefetch" href="/assets/js/44.7e97ec39.js"><link rel="prefetch" href="/assets/js/45.b2b7d80e.js"><link rel="prefetch" href="/assets/js/46.86e57f79.js"><link rel="prefetch" href="/assets/js/47.853f7781.js"><link rel="prefetch" href="/assets/js/48.cff12bd1.js"><link rel="prefetch" href="/assets/js/49.fba90926.js"><link rel="prefetch" href="/assets/js/5.01119bb7.js"><link rel="prefetch" href="/assets/js/50.6ede478b.js"><link rel="prefetch" href="/assets/js/51.c3c9b51a.js"><link rel="prefetch" href="/assets/js/52.782ca6fd.js"><link rel="prefetch" href="/assets/js/53.84f2cf23.js"><link rel="prefetch" href="/assets/js/54.f9ece6d1.js"><link rel="prefetch" href="/assets/js/55.18e557e7.js"><link rel="prefetch" href="/assets/js/56.ee4f4d7b.js"><link rel="prefetch" href="/assets/js/57.d9826b30.js"><link rel="prefetch" href="/assets/js/58.37303304.js"><link rel="prefetch" href="/assets/js/59.18d00764.js"><link rel="prefetch" href="/assets/js/6.a180f86f.js"><link rel="prefetch" href="/assets/js/60.6f552623.js"><link rel="prefetch" href="/assets/js/61.fe4a5d05.js"><link rel="prefetch" href="/assets/js/62.aedec3d1.js"><link rel="prefetch" href="/assets/js/63.c944f6d2.js"><link rel="prefetch" href="/assets/js/64.668d536d.js"><link rel="prefetch" href="/assets/js/65.5a669978.js"><link rel="prefetch" href="/assets/js/66.328f948a.js"><link rel="prefetch" href="/assets/js/67.7b3a978b.js"><link rel="prefetch" href="/assets/js/68.b5db47ea.js"><link rel="prefetch" href="/assets/js/69.e073998b.js"><link rel="prefetch" href="/assets/js/7.059eb541.js"><link rel="prefetch" href="/assets/js/70.cea89d06.js"><link rel="prefetch" href="/assets/js/71.e2457395.js"><link rel="prefetch" href="/assets/js/72.e6cd56a7.js"><link rel="prefetch" href="/assets/js/73.89ca4d49.js"><link rel="prefetch" href="/assets/js/74.97753c6b.js"><link rel="prefetch" href="/assets/js/75.77f4e9ad.js"><link rel="prefetch" href="/assets/js/76.61acf14d.js"><link rel="prefetch" href="/assets/js/77.a4e97942.js"><link rel="prefetch" href="/assets/js/78.2d27f078.js"><link rel="prefetch" href="/assets/js/79.1508ebbc.js"><link rel="prefetch" href="/assets/js/8.a24e3ea0.js"><link rel="prefetch" href="/assets/js/80.9d140fba.js"><link rel="prefetch" href="/assets/js/81.0051bd6b.js"><link rel="prefetch" href="/assets/js/82.dde164f6.js"><link rel="prefetch" href="/assets/js/83.812ec7b8.js"><link rel="prefetch" href="/assets/js/84.dda24685.js"><link rel="prefetch" href="/assets/js/85.d9bac132.js"><link rel="prefetch" href="/assets/js/86.035adaf4.js"><link rel="prefetch" href="/assets/js/87.4440114c.js"><link rel="prefetch" href="/assets/js/88.dc1865d6.js"><link rel="prefetch" href="/assets/js/89.21573ecb.js"><link rel="prefetch" href="/assets/js/9.2397fef4.js"><link rel="prefetch" href="/assets/js/90.c66795df.js"><link rel="prefetch" href="/assets/js/91.a7c4967f.js"><link rel="prefetch" href="/assets/js/92.d8c4dfd8.js"><link rel="prefetch" href="/assets/js/93.7f9ef85f.js"><link rel="prefetch" href="/assets/js/94.81b70d89.js"><link rel="prefetch" href="/assets/js/95.dcd3fd30.js"><link rel="prefetch" href="/assets/js/96.31b7b5d7.js"><link rel="prefetch" href="/assets/js/97.5b19dc15.js"><link rel="prefetch" href="/assets/js/98.a53bd898.js"><link rel="prefetch" href="/assets/js/99.5786028c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6c58b99e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ontop</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/tutorial/" class="nav-link router-link-active">
  Tutorial
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  Research
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Dev
</a></div><div class="nav-item"><a href="/jobs/" class="nav-link">
  Work with us
</a></div> <a href="https://github.com/ontop/ontop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/tutorial/" class="nav-link router-link-active">
  Tutorial
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  Research
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Dev
</a></div><div class="nav-item"><a href="/jobs/" class="nav-link">
  Work with us
</a></div> <a href="https://github.com/ontop/ontop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Tutorial</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/" aria-current="page" class="sidebar-link">Presentation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/basic/setup.html" class="sidebar-link">Database and Ontop Setup</a></li><li><a href="/tutorial/basic/university-1.html" class="sidebar-link">First data source: university 1</a></li><li><a href="/tutorial/basic/university-2.html" class="sidebar-link">Second data source: university 2</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Endpoint</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/endpoint/" class="sidebar-link">Deploying a SPARQL endpoint</a></li><li><a href="/tutorial/endpoint/endpoint-cli.html" class="sidebar-link">Setting up an Ontop SPARQL endpoint with Ontop CLI</a></li><li><a href="/tutorial/endpoint/endpoint-docker.html" class="sidebar-link">Setting up an Ontop SPARQL endpoint with Docker</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Interact</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/interact/cli.html" class="sidebar-link">Interact with an Ontop SPARQL Endpoint</a></li><li><a href="/tutorial/interact/jupyter.html" class="sidebar-link">Use Jupyter Notebook with an Ontop SPARQL endpoint</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mapping</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/mapping/" aria-current="page" class="sidebar-link">Second session: Mapping Engineering</a></li><li><a href="/tutorial/mapping/primary-keys.html" class="sidebar-link">Role of primary keys (unique constraints)</a></li><li><a href="/tutorial/mapping/foreign-keys.html" class="sidebar-link">Role of foreign keys</a></li><li><a href="/tutorial/mapping/uri-templates.html" aria-current="page" class="active sidebar-link">Choice of the IRI templates</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tutorial/mapping/uri-templates.html#manual-approach" class="sidebar-link">Manual approach</a></li><li class="sidebar-sub-header"><a href="/tutorial/mapping/uri-templates.html#canonical-iris" class="sidebar-link">Canonical IRIs</a></li></ul></li><li><a href="/tutorial/mapping/existential.html" class="sidebar-link">Bonus: existential reasoning</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Materialize</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/materialization/materialization.html" class="sidebar-link">How to materialize data into a graph database</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Federation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/federation/" class="sidebar-link">Federating multiple databases</a></li><li><a href="/tutorial/federation/denodo/" class="sidebar-link">Ontop with Denodo</a></li><li><a href="/tutorial/federation/dremio/" class="sidebar-link">Ontop with Dremio</a></li><li><a href="/tutorial/federation/teiid/" class="sidebar-link">Ontop with Teiid</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Lenses</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/lenses/" class="sidebar-link">Using lenses</a></li><li><a href="/tutorial/lenses/setup.html" class="sidebar-link">Database and Ontop Setup</a></li><li><a href="/tutorial/lenses/basic-lens.html" class="sidebar-link">Basic Lens</a></li><li><a href="/tutorial/lenses/join-lens.html" class="sidebar-link">Join Lens</a></li><li><a href="/tutorial/lenses/union-lens.html" class="sidebar-link">Union Lens</a></li><li><a href="/tutorial/lenses/flatten-lens.html" class="sidebar-link">Flatten Lens</a></li><li><a href="/tutorial/lenses/sql-lens.html" class="sidebar-link">SQL Lens</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Others</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tutorial/external-tutorials.html" class="sidebar-link">External tutorials</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="choice-of-the-iri-templates"><a href="#choice-of-the-iri-templates" class="header-anchor">#</a> Choice of the IRI templates</h1> <p>The choice of IRI templates may impact query complexity and performance, depending on whether joins have to be introduced to materialize those templates.</p> <p>Until now, we have been using local identifiers from the data sources to build three different IRI templates for the persons of the two universities:</p> <ul><li><code>ex:uni1/student/{*}</code></li> <li><code>ex:uni1/academic/{*}</code></li> <li><code>ex:uni2/person/{*}</code></li></ul> <p>Let us now consider the case where the tables <code>uni1.student</code>, <code>uni1.academic</code> and <code>uni2.person</code> have
a new column: <code>ssn</code>. This column corresponds to the social security number of the person.</p> <p>This new column gives us the opportunity to use a common IRI template for all the persons. Such IRI template would allow us to collect information about a person registered in both universities.</p> <p>As we will see, there are actually some persons that are teaching or studying in both universities.</p> <p>Given that we already have the mapping assertions produced during the first session, we will consider
two ways to change the IRI templates: first by doing it manually, then using the notion of <em>canonical IRIs</em>.</p> <p>We will also see that using this new IRI template has a negative impact on the performance of some queries.</p> <h2 id="manual-approach"><a href="#manual-approach" class="header-anchor">#</a> Manual approach</h2> <p>Download the following files:</p> <ul><li><a href="university-manual-ssn.ttl">university-manual-ssn.ttl</a></li> <li><a href="university-manual-ssn.obda">university-manual-ssn.obda</a></li> <li><a href="university-manual-ssn.properties">university-manual-ssn.properties</a></li></ul> <p>The mapping assertions are currently the same as during the first hands-on session.
Let us now update them with the new IRI template for persons.</p> <h4 id="mapping-uni1-student"><a href="#mapping-uni1-student" class="header-anchor">#</a> Mapping uni1.student</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token keyword">a</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">Student</span></span> <span class="token punctuation">;</span>
   <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">firstName</span></span> <span class="token punctuation">{</span>first_name<span class="token punctuation">}</span><span class="token punctuation">^^</span><span class="token function"><span class="token prefix">xsd<span class="token punctuation">:</span></span><span class="token local-name">string</span></span> <span class="token punctuation">;</span> <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">lastName</span></span> <span class="token punctuation">{</span>last_name<span class="token punctuation">}</span><span class="token punctuation">^^</span><span class="token function"><span class="token prefix">xsd<span class="token punctuation">:</span></span><span class="token local-name">string</span></span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;student&quot;</span>
</code></pre></div><h4 id="mapping-uni1-academic"><a href="#mapping-uni1-academic" class="header-anchor">#</a> Mapping uni1-academic</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token keyword">a</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">FacultyMember</span></span> <span class="token punctuation">;</span>
    <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">firstName</span></span> <span class="token punctuation">{</span>first_name<span class="token punctuation">}</span><span class="token punctuation">^^</span><span class="token function"><span class="token prefix">xsd<span class="token punctuation">:</span></span><span class="token local-name">string</span></span> <span class="token punctuation">;</span>
    <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">lastName</span></span> <span class="token punctuation">{</span>last_name<span class="token punctuation">}</span><span class="token punctuation">^^</span><span class="token function"><span class="token prefix">xsd<span class="token punctuation">:</span></span><span class="token local-name">string</span></span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;academic&quot;</span>
</code></pre></div><h4 id="mapping-uni1-teaching"><a href="#mapping-uni1-teaching" class="header-anchor">#</a> Mapping uni1-teaching</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">teaches</span></span> <span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">uni1</span></span>/course/<span class="token punctuation">{</span>c_id<span class="token punctuation">}</span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ac<span class="token punctuation">.</span><span class="token string">&quot;ssn&quot;</span><span class="token punctuation">,</span> te<span class="token punctuation">.</span><span class="token string">&quot;c_id&quot;</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;teaching&quot;</span> te<span class="token punctuation">,</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;academic&quot;</span> ac
<span class="token keyword">WHERE</span> te<span class="token punctuation">.</span><span class="token string">&quot;a_id&quot;</span> <span class="token operator">=</span> ac<span class="token punctuation">.</span><span class="token string">&quot;a_id&quot;</span>
</code></pre></div><p>As you can see, a join is needed to get the SSN of the teacher.</p> <h4 id="mapping-uni1-registration"><a href="#mapping-uni1-registration" class="header-anchor">#</a> Mapping uni1-registration</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">attends</span></span> <span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">uni1</span></span>/course/<span class="token punctuation">{</span>c_id<span class="token punctuation">}</span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> st<span class="token punctuation">.</span><span class="token string">&quot;ssn&quot;</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span><span class="token string">&quot;c_id&quot;</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;course-registration&quot;</span> re<span class="token punctuation">,</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;student&quot;</span> st
<span class="token keyword">WHERE</span> re<span class="token punctuation">.</span><span class="token string">&quot;s_id&quot;</span> <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token string">&quot;s_id&quot;</span>
</code></pre></div><h4 id="mapping-uni1-fullprofessor"><a href="#mapping-uni1-fullprofessor" class="header-anchor">#</a> Mapping uni1-fullProfessor</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token keyword">a</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">FullProfessor</span></span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;academic&quot;</span>
<span class="token keyword">WHERE</span> <span class="token string">&quot;position&quot;</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><p>Then proceed in a similar way for the other positions (assistant professor, postdoc, etc.).</p> <h4 id="mapping-uni2-person"><a href="#mapping-uni2-person" class="header-anchor">#</a> Mapping uni2.person</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token keyword">a</span> <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">Person</span></span> <span class="token punctuation">;</span>
    <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">firstName</span></span> <span class="token punctuation">{</span>fname<span class="token punctuation">}</span><span class="token punctuation">^^</span><span class="token function"><span class="token prefix">xsd<span class="token punctuation">:</span></span><span class="token local-name">string</span></span> <span class="token punctuation">;</span>
    <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">lastName</span></span> <span class="token punctuation">{</span>lname<span class="token punctuation">}</span><span class="token punctuation">^^</span><span class="token function"><span class="token prefix">xsd<span class="token punctuation">:</span></span><span class="token local-name">string</span></span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;person&quot;</span>
</code></pre></div><h4 id="mapping-uni2-lecturer"><a href="#mapping-uni2-lecturer" class="header-anchor">#</a> Mapping uni2-lecturer</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">givesLecture</span></span> <span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">uni2</span></span>/course/<span class="token punctuation">{</span>cid<span class="token punctuation">}</span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> pe<span class="token punctuation">.</span><span class="token string">&quot;ssn&quot;</span><span class="token punctuation">,</span> co<span class="token punctuation">.</span><span class="token string">&quot;cid&quot;</span> 
<span class="token keyword">FROM</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;course&quot;</span> co<span class="token punctuation">,</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;person&quot;</span> pe
<span class="token keyword">WHERE</span> co<span class="token punctuation">.</span><span class="token string">&quot;lecturer&quot;</span> <span class="token operator">=</span> pe<span class="token punctuation">.</span><span class="token string">&quot;pid&quot;</span>
</code></pre></div><h4 id="mapping-uni2-lab-teacher"><a href="#mapping-uni2-lab-teacher" class="header-anchor">#</a> Mapping uni2-lab-teacher</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">givesLab</span></span> <span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">uni2</span></span>/course/<span class="token punctuation">{</span>cid<span class="token punctuation">}</span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> pe<span class="token punctuation">.</span><span class="token string">&quot;ssn&quot;</span><span class="token punctuation">,</span> co<span class="token punctuation">.</span><span class="token string">&quot;cid&quot;</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;course&quot;</span> co<span class="token punctuation">,</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;person&quot;</span> pe
<span class="token keyword">WHERE</span> co<span class="token punctuation">.</span><span class="token string">&quot;lab_teacher&quot;</span> <span class="token operator">=</span> pe<span class="token punctuation">.</span><span class="token string">&quot;pid&quot;</span>
</code></pre></div><h4 id="mapping-uni2-registration"><a href="#mapping-uni2-registration" class="header-anchor">#</a> Mapping uni2-registration</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">attends</span></span> <span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">uni2</span></span>/course/<span class="token punctuation">{</span>cid<span class="token punctuation">}</span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> pe<span class="token punctuation">.</span><span class="token string">&quot;ssn&quot;</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span><span class="token string">&quot;cid&quot;</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;registration&quot;</span> re<span class="token punctuation">,</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;person&quot;</span> pe
<span class="token keyword">WHERE</span> re<span class="token punctuation">.</span><span class="token string">&quot;pid&quot;</span> <span class="token operator">=</span> pe<span class="token punctuation">.</span><span class="token string">&quot;pid&quot;</span>
</code></pre></div><h4 id="mapping-uni2-undergraduate"><a href="#mapping-uni2-undergraduate" class="header-anchor">#</a> Mapping uni2-undergraduate</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix">ex<span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token keyword">a</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">UndergraduateStudent</span></span> <span class="token punctuation">.</span>
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;person&quot;</span>
<span class="token keyword">WHERE</span> <span class="token string">&quot;status&quot;</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><p>Then proceed in a similar way for the other positions (assistant professor, postdoc, etc.).</p> <h3 id="sparql-queries"><a href="#sparql-queries" class="header-anchor">#</a> SPARQL queries</h3> <p>With the new mapping assertions, the following SPARQL query should now return some results:</p> <div class="language-sparql extra-class"><pre class="language-sparql"><code><span class="token keyword">PREFIX</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span></span> <span class="token url"><span class="token punctuation">&lt;</span>http://example.org/voc#<span class="token punctuation">&gt;</span></span>
<span class="token keyword">PREFIX</span> <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span></span> <span class="token url"><span class="token punctuation">&lt;</span>http://xmlns.com/foaf/0.1/<span class="token punctuation">&gt;</span></span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token variable">?firstName</span> <span class="token variable">?lastName</span> <span class="token variable">?ins1</span> <span class="token variable">?ins2</span> <span class="token punctuation">{</span>
   <span class="token variable">?p</span> <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">firstName</span></span> <span class="token variable">?firstName</span> <span class="token punctuation">;</span>
      <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">lastName</span></span> <span class="token variable">?lastName</span> <span class="token punctuation">;</span>
      <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">teaches</span></span> <span class="token punctuation">[</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">isGivenAt</span></span> <span class="token variable">?ins1</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token punctuation">[</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">isGivenAt</span></span> <span class="token variable">?ins2</span> <span class="token punctuation">]</span> <span class="token punctuation">.</span>
  <span class="token keyword">FILTER</span><span class="token punctuation">(</span><span class="token keyword">str</span><span class="token punctuation">(</span><span class="token variable">?ins1</span><span class="token punctuation">)</span> &lt; <span class="token keyword">str</span><span class="token punctuation">(</span><span class="token variable">?ins2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>However, if you execute another variant, you will see it is now very inefficient:</p> <div class="language-sparql extra-class"><pre class="language-sparql"><code><span class="token keyword">PREFIX</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span></span> <span class="token url"><span class="token punctuation">&lt;</span>http://example.org/voc#<span class="token punctuation">&gt;</span></span>
<span class="token keyword">PREFIX</span> <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span></span> <span class="token url"><span class="token punctuation">&lt;</span>http://xmlns.com/foaf/0.1/<span class="token punctuation">&gt;</span></span>
<span class="token keyword">SELECT</span> <span class="token variable">?firstName</span> <span class="token variable">?lastName</span> <span class="token variable">?ins1</span> <span class="token variable">?ins2</span> <span class="token punctuation">{</span>
   <span class="token variable">?p1</span> <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">firstName</span></span> <span class="token variable">?firstName</span> <span class="token punctuation">;</span>
      <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">lastName</span></span> <span class="token variable">?lastName</span> <span class="token punctuation">;</span>
      <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">teaches</span></span> <span class="token punctuation">[</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">isGivenAt</span></span> <span class="token variable">?ins1</span> <span class="token punctuation">]</span> <span class="token punctuation">.</span>
   <span class="token variable">?p2</span> <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">firstName</span></span> <span class="token variable">?firstName</span> <span class="token punctuation">;</span>
      <span class="token function"><span class="token prefix">foaf<span class="token punctuation">:</span></span><span class="token local-name">lastName</span></span> <span class="token variable">?lastName</span> <span class="token punctuation">;</span>
      <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">teaches</span></span> <span class="token punctuation">[</span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">isGivenAt</span></span> <span class="token variable">?ins2</span> <span class="token punctuation">]</span> <span class="token punctuation">.</span>
  <span class="token keyword">FILTER</span><span class="token punctuation">(</span><span class="token keyword">str</span><span class="token punctuation">(</span><span class="token variable">?ins1</span><span class="token punctuation">)</span> &lt; <span class="token keyword">str</span><span class="token punctuation">(</span><span class="token variable">?ins2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Look at the SQL query, it should be very long as it suffers from a substantial exponential blowup.
Note that the first query also suffers from an exponential blowup but the latter is less important and thus less sensible on our small dataset.</p> <h2 id="canonical-iris"><a href="#canonical-iris" class="header-anchor">#</a> Canonical IRIs</h2> <p>Instead of changing the mapping assertions manually, Ontop allows you to declare a canonical IRI template for <code>ex:uni1/student/{*}</code>, <code>ex:uni1/academic/{*}</code> and <code>ex:uni2/person/{*}</code>.</p> <p>This takes the form of three additional mapping assertions that can be found in the <a href="university-canonical.ttl">university-canonical.ttl</a>, <a href="university-canonical.obda">university-canonical.obda</a>, and <a href="university-canonical.properties">university-canonical.properties</a> files.</p> <h4 id="mapping-uni1-academic-canonical"><a href="#mapping-uni1-academic-canonical" class="header-anchor">#</a> Mapping uni1-academic-canonical</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix">obda<span class="token punctuation">:</span></span><span class="token local-name">isCanonicalIRIOf</span></span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">uni1</span></span>/academic/<span class="token punctuation">{</span>a_id<span class="token punctuation">}</span> <span class="token punctuation">.</span> 
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;academic&quot;</span>
</code></pre></div><h4 id="mapping-uni1-student-canonical"><a href="#mapping-uni1-student-canonical" class="header-anchor">#</a> Mapping uni1.student-canonical</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix">obda<span class="token punctuation">:</span></span><span class="token local-name">isCanonicalIRIOf</span></span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">uni1</span></span>/student/<span class="token punctuation">{</span>s_id<span class="token punctuation">}</span> <span class="token punctuation">.</span> 
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;uni1&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;student&quot;</span>
</code></pre></div><h4 id="mapping-uni2-person-canonical"><a href="#mapping-uni2-person-canonical" class="header-anchor">#</a> Mapping uni2.person-canonical</h4> <ul><li>Target:</li></ul> <div class="language-turtle extra-class"><pre class="language-turtle"><code><span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">person</span></span>/<span class="token punctuation">{</span>ssn<span class="token punctuation">}</span> <span class="token function"><span class="token prefix">obda<span class="token punctuation">:</span></span><span class="token local-name">isCanonicalIRIOf</span></span> <span class="token function"><span class="token prefix"><span class="token punctuation">:</span></span><span class="token local-name">uni2</span></span>/person/<span class="token punctuation">{</span>pid<span class="token punctuation">}</span> <span class="token punctuation">.</span> 
</code></pre></div><ul><li>Source:</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;uni2&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;person&quot;</span>
</code></pre></div><p>With these three mapping assertions and the ones of the first session, Ontop produces the same saturated mapping assertions as in the manual approach.
Query evaluation performance is thus the same (and similarly affected to the additional joins needed to build person IRIs), but the use of canonical IRI templates makes simpler for users to define and adapt mappings.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ontop/ontop-website/edit/master/tutorial/mapping/uri-templates.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/2/2025, 6:42:28 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tutorial/mapping/foreign-keys.html" class="prev">
        Role of foreign keys
      </a></span> <span class="next"><a href="/tutorial/mapping/existential.html">
        Bonus: existential reasoning
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.86ad1eec.js" defer></script><script src="/assets/js/2.ce8d9015.js" defer></script><script src="/assets/js/100.f12c2aea.js" defer></script>
  </body>
</html>
